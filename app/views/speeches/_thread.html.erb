<div class="thread-contribution">
  <div class="contribution-contributor padding-10">
    <div class="contributor-avatar user-avatar-small">
      <%= image_tag "#{contribution.user.photo_url}", class: "user-avatar-small" %>
    </div>
    <div class="contributor-details">
      <p class="contribution-username"><%= contribution.user.username %></p>
      <p class="contribution-date"><%= contribution.created_at.strftime("%d.%m.%Y") %></p>
    </div>
  </div>
  <div class="contribution-content">
    <p><%= contribution.content %></p>
  </div>
  <div class="contribution-voting">
    <%= link_to contribution_upvote_path(contribution) do %>
      <i class="fas fa-sort-up"></i>
    <% end %>
    <%= contribution.vote_sum %>
    <%= link_to contribution_downvote_path(contribution) do %>
      <i class="fas fa-sort-down"></i>
    <% end %>
  </div>
</div>





<div class="thread">
  <%= "<strong>#{contribution.user.username}:</strong> #{contribution.content}<em><br>(#{contribution.created_at})<br>(from char no. #{contribution.start_position} to #{contribution.end_position})</em>".html_safe %>
  <p style="background-color: <%= %w[red grey green][contribution.user_vote(current_user) + 1] %>;">
    <%= link_to '+', contribution_upvote_path(contribution) %>

    <%= contribution.vote_sum %>
    <%= link_to '-', contribution_downvote_path(contribution) %>
  </p>
  <h5><strong>Comments: </strong></h5>
  <ul>
    <% contribution.comments.each do |comment|%>
    <li>
      <%= "<strong>#{comment.user.username}</strong> <em>commented</em> #{comment.content}<br>(#{comment.created_at})".html_safe %>
      <p style="background-color: <%= %w[red grey green][comment.user_vote(current_user) + 1] %>;">
        <%= link_to '+', comment_upvote_path(comment) %>
        <%= comment.vote_sum %>
        <%= link_to '-', comment_downvote_path(comment) %>
      </p>
    </li>
    <% end %>
    <li>
      <% comment = Comment.new %>
      <%= form_for comment, url: contribution_comments_path(contribution) do |f| %>
      <%= f.label :content, current_user.username%>
      <%= f.text_field :content %>
      <%= f.submit 'Send', method: :post %>
      <% end %>
    </li>
  </ul>
</div>
